!function(){"use strict";var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function r(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}e.p="";var o=function(){return e=function e(t,n,r,o,i,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._id=t._id,this._likes=t.likes,this._cardId=t._id,this.owner=t.owner,this.userId=n,this._handleCardClick=r,this._handleCardDelete=o,this._handleCardLike=i,this._handleCardDislike=c,this._card=this._getTemplate()},(t=[{key:"_getTemplate",value:function(){return document.querySelector("#gallery-template").content.querySelector(".gallery__item").cloneNode(!0)}},{key:"_setProperties",value:function(){this._btnDelete=this._card.querySelector(".gallery__trash"),this.owner._id!==this.userId&&this._btnDelete.remove(),this._galleryImage=this._card.querySelector(".gallery__image"),this._galleryCont=this._card.querySelector(".gallery__content-text"),this._galleryTitle=this._galleryCont.querySelector(".gallery__title-item"),this._btnLike=this._galleryCont.querySelector(".gallery__like"),this.likesCounter=this._galleryCont.querySelector(".gallery__like-number"),this._galleryImage.src=this._link,this._galleryImage.alt=this._name,this._galleryTitle.textContent=this._name,this.likesCounter.textContent=this._likes.length}},{key:"_setEventListeners",value:function(){var e=this;this._btnLike.addEventListener("click",(function(){e._btnLike.classList.toggle("gallery__like_active")})),this._btnDelete.addEventListener("click",(function(){console.log("entrando a eliminar"),e._handleCardDelete(e._id,e._btnDelete)})),this._galleryImage.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)}))}},{key:"generateCard",value:function(){return this._setProperties(),this._setEventListeners(),this._card}}])&&n(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var a=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._settings=t,this._formElement=n},(t=[{key:"_showInputError",value:function(e,t,n){var r=n.querySelector(".".concat(e.id,"-error"));e.classList.add(this._settings.inputErrorClass),r.textContent=t,r.classList.add(this._settings.inputErrorActive)}},{key:"_hideInputError",value:function(e,t){var n=t.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._settings.inputErrorClass),n.classList.remove(this._settings.inputErrorActive),n.textContent=""}},{key:"_checkInputValidity",value:function(e,t){e.validity.valid?this._hideInputError(e,t):this._showInputError(e,e.validationMessage,t)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid||0===e.value.trim().length}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?t.classList.add(this._settings.inactiveButtonClass):t.classList.remove(this._settings.inactiveButtonClass)}},{key:"_setEventListeners",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),n=this._formElement.querySelector(this._settings.submitButtonSelector);this._toggleButtonState(t,n),t.forEach((function(r){e._addEventInputAndValidate(r,t,n,e._formElement)}))}},{key:"_addEventInputAndValidate",value:function(e,t,n,r){var o=this;e.addEventListener("input",(function(){o._checkInputValidity(e,r),o._toggleButtonState(t,n)}))}},{key:"_getSubmit",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()}))}},{key:"enableValidation",value:function(){this._getSubmit(),this._setEventListeners()}}])&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),l=document.querySelector(".profile").querySelector(".profile__container"),s=l.querySelector(".profile__data"),f=document.querySelector(".main").querySelector(".gallery"),p=document.querySelector(".popup-show").querySelector(".popup-show__container"),y=p.querySelector(".popup-show__close"),h=(p.querySelector(".popup-show__add"),p.querySelector(".popup-show__title-create"),document.querySelector("#remove-card")),d=s.querySelector(".profile__edit-data"),m=document.querySelector("#close-profile"),v=document.querySelector(".profile__name"),b=document.querySelector(".profile__description"),_=(document.querySelector(".profile__face-image"),l.querySelector(".profile__add-picture")),g=document.querySelector("#input-name"),S=document.querySelector("#input-desc"),w=document.querySelector("#close-card");function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function P(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}var j=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)},(t=[{key:"open",value:function(){this._popupElement.classList.add("popup_generate"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_generate"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"handleClickOutside",value:function(e){e.target===this._popupElement&&this.close()}},{key:"setEventListeners",value:function(){var e=this;document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("click",(function(t){e.handleClickOutside(t)}))}}])&&k(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q(r.key),r)}}function q(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}function L(e,t,n){return t=D(t),function(e,t){if(t&&("object"==O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,I()?Reflect.construct(t,n||[],D(e).constructor):t.apply(e,n))}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(I=function(){return!!e})()}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},T.apply(null,arguments)}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}var x=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=L(this,t,[e]))._formElement=r._popupElement.querySelector(".popup__form"),r._inputList=r._formElement.querySelectorAll(".popup__input"),r._handleFormSubmit=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(t,e),n=t,(r=[{key:"close",value:function(){T(D(t.prototype),"close",this).call(this),this._formElement.reset()}},{key:"getInputValues",value:function(){var e=this;return this.formValues={},this._inputList.forEach((function(t){e.formValues[t.name]=t.value})),this.formValues}},{key:"setEventListeners",value:function(){var e=this;T(D(t.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e.getInputValues()),e.close()}))}}])&&C(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(j);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function A(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==U(t)?t:t+""}var V=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)},(t=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderer",value:function(){var e=this;this.clear(),this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&B(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,J(r.key),r)}}function J(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==N(t)?t:t+""}var G=function(){return e=function e(t){var n=t.nameSelector,r=t.jobSelector,o=t.avatarSelector,i=t.id;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._job=document.querySelector(r),this._avatar=document.querySelector(o),this._userId=i},(t=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,job:this._job.textContent,avatar:this._avatar.src,_id:this._userId}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._job.textContent=e.about,this._avatar.src=e.avatar,this._userId=e._id}}])&&F(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z(r.key),r)}}function z(e){var t=function(e,t){if("object"!=H(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==H(t)?t:t+""}function K(e,t,n){return t=X(t),function(e,t){if(t&&("object"==H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Q()?Reflect.construct(t,n||[],X(e).constructor):t.apply(e,n))}function Q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Q=function(){return!!e})()}function W(){return W="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=X(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},W.apply(null,arguments)}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}var Z=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=K(this,t,[n]))._name=e.name,r._link=e.link,r._card=r._popupElement.querySelector(".popup-show__container"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(t,e),n=t,(r=[{key:"_setProperties",value:function(){this._image=this._card.querySelector(".popup-show__add"),this._title=this._card.querySelector(".popup-show__title-create"),this._image.src=this._link,this._image.alt=this._name,this._title.textContent=this._name}},{key:"open",value:function(){W(X(t.prototype),"open",this).call(this),W(X(t.prototype),"setEventListeners",this).call(this),this._setProperties()}}])&&M(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(j);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,te(r.key),r)}}function te(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$(t)?t:t+""}var ne=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers},(t=[{key:"handlePromise",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/cards"),{method:"GET",headers:this.headers}).then((function(t){return e.handlePromise(t)})).catch((function(e){console.log(e)}))}},{key:"getProfileInfo",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/users/me"),{method:"GET",headers:this.headers}).then((function(t){return e.handlePromise(t)})).catch((function(e){console.log(e)}))}},{key:"editProfile",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t.handlePromise(e)})).catch((function(e){console.log(e)}))}},{key:"addCards",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t.handlePromise(e)})).catch((function(e){console.log(e)}))}},{key:"removeCards",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this.headers,body:JSON.stringify({name:card.name,link:card.link})}).then((function(e){return t.handlePromise(e)})).catch((function(e){console.log(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then((function(e){return t.handlePromise(e)})).catch((function(e){console.log(e)}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers,body:JSON.stringify({name:card.name,link:card.link})}).then((function(e){return t.handlePromise(e)})).catch((function(e){console.log(e)}))}}])&&ee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),re=e.p+"aa1b5592fed861ab3510.png",oe=e.p+"609b6840c8b2e02c8ca9.png",ie=e.p+"9036a094c3c410e6a834.png",ce=e.p+"b055c3f7a4de2a452e9d.png",ue=e.p+"4ca60d6bc216cdde68af.png";function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,se(r.key),r)}}function se(e){var t=function(e,t){if("object"!=ae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ae(t)?t:t+""}function fe(e,t,n){return t=he(t),function(e,t){if(t&&("object"==ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pe()?Reflect.construct(t,n||[],he(e).constructor):t.apply(e,n))}function pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pe=function(){return!!e})()}function ye(){return ye="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=he(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ye.apply(null,arguments)}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},he(e)}function de(e,t){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},de(e,t)}var me=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=fe(this,t,[e]))._formElement=r._popupElement.querySelector(".popup__form"),r._handleFormSubmit=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&de(e,t)}(t,e),n=t,(r=[{key:"setEventListeners",value:function(){var e=this;ye(he(t.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(),e.close()}))}}])&&le(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(j);function ve(){document.querySelectorAll(".gallery__image-trash").forEach((function(e){e.src=ue}))}document.querySelector("#image-logo").src=re,document.querySelector("#image-pencil").src=oe,document.querySelector("#image-add").src=ie,document.querySelector("#close-profile").src=ce,document.querySelector("#close-card").src=ce,document.querySelector("#close-show").src=ce;var be=new ne({baseUrl:"https://around.nomoreparties.co/v1/web_es_11",headers:{authorization:"f2d5b74c-c626-4038-b275-b200d36582b5","Content-Type":"application/json"}}),_e=new G({nameSelector:".profile__name",jobSelector:".profile__description",avatarSelector:".profile__face-image",id:""});function ge(e,t){var n=new Z({name:e,link:t},"#popup-show_id");n.open(),y.addEventListener("click",(function(){n.close()}))}function Se(e,t){var n=new me("#popup-delete",(function(){console.log("id: ",e)}));n.setEventListeners(),t.addEventListener("click",(function(){n.open()})),h.addEventListener("click",(function(){n.close()}))}function we(e){return new o(e,_e._userId,ge,Se)}be.getProfileInfo().then((function(e){_e.setUserInfo(e)})),be.getInitialCards().then((function(e){var t=new V({items:e,renderer:function(e){var n=we(e).generateCard();t.addItem(n)}},".gallery");t.renderer(),ve()}));var Ee=new x("#popup-profile",(function(e){be.editProfile(e).then((function(e){v.textContent=e.name,b.textContent=e.about}))}));Ee.setEventListeners(),d.addEventListener("click",(function(){Ee.open();var e=_e.getUserInfo();g.value=e.name,S.value=e.job})),m.addEventListener("click",(function(){Ee.close()}));var ke=new x("#popup-picture",(function(e){be.addCards({name:e.title,link:e.link}).then((function(e){var t=we(e);f.prepend(t.generateCard()),ve()}))}));ke.setEventListeners(),_.addEventListener("click",(function(){ke.open()})),w.addEventListener("click",(function(){ke.close()})),Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){new a({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_inactive",inputErrorClass:"popup__input_type_error",inputErrorActive:"popup__input-error_active",errorClass:".popup__error"},e).enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2dDLEdBQzVELElBQU1jLEVBQVVoQixHQUFhRSxHQUM3QjNHLEVBQWUwSCxRQUFRRCxFQUFRaEIsZ0JBQy9CZixJQUNGLEdBQ0YsSUFHQTRCLEdBQVVkLG9CQUdWaEcsRUFBTXRELGlCQUFpQixTQUFTLFdBQzlCb0ssR0FBVWpCLE1BQ1osSUFHQTFGLEVBQWV6RCxpQkFBaUIsU0FBUyxXQUN2Q29LLEdBQVVwRyxPQUNaLElBS2lCakMsTUFBTUMsS0FBS2hELFNBQVNpRCxpQkFBaUIsaUJBRTdDSSxTQUFRLFNBQUM1QixHQUVFLElBQUlGLEVBQ3BCLENBQ0VrSyxhQUFjLGVBQ2R2SSxjQUFlLGdCQUNmQyxxQkFBc0IsaUJBQ3RCTCxvQkFBcUIseUJBQ3JCWixnQkFBaUIsMEJBQ2pCQyxpQkFBa0IsNEJBQ2xCdUosV0FBWSxpQkFFZGpLLEdBRVFrSyxrQkFDWixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiZXhwb3J0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBkYXRhLFxuICAgIHVzZXJJZCxcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgaGFuZGxlQ2FyZERlbGV0ZSxcbiAgICBoYW5kbGVDYXJkTGlrZSxcbiAgICBoYW5kbGVDYXJkRGlzTGlrZVxuICApIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5vd25lciA9IGRhdGEub3duZXI7XG4gICAgdGhpcy51c2VySWQgPSB1c2VySWQ7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGUgPSBoYW5kbGVDYXJkRGVsZXRlO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlID0gaGFuZGxlQ2FyZExpa2U7XG4gICAgdGhpcy5faGFuZGxlQ2FyZERpc2xpa2UgPSBoYW5kbGVDYXJkRGlzTGlrZTtcbiAgICB0aGlzLl9jYXJkID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgfVxuXG4gIC8vT2J0aWVuZSBsYSBwbGFudGlsbGEgZGUgbGEgdGFyamV0YVxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIiNnYWxsZXJ5LXRlbXBsYXRlXCIpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2l0ZW1cIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICAvL0VzdGFibGVjZSBsYXMgcHJvcGllZGFkZXMgZGUgbGEgdGFyamV0YVxuICBfc2V0UHJvcGVydGllcygpIHtcbiAgICB0aGlzLl9idG5EZWxldGUgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fdHJhc2hcIik7XG4gICAgLypjb25zb2xlLmxvZyhcIm93bmVyOiBcIiwgdGhpcy5vd25lci5faWQpO1xuICAgIGNvbnNvbGUubG9nKFwidXNlcklkOiBcIiwgdGhpcy51c2VySWQpOyovXG4gICAgaWYgKHRoaXMub3duZXIuX2lkICE9PSB0aGlzLnVzZXJJZCkge1xuICAgICAgdGhpcy5fYnRuRGVsZXRlLnJlbW92ZSgpO1xuICAgIH0gLyplbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiZXMgZWwgbWlzbW9cIik7XG4gICAgfSovXG5cbiAgICB0aGlzLl9nYWxsZXJ5SW1hZ2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9faW1hZ2VcIik7XG4gICAgdGhpcy5fZ2FsbGVyeUNvbnQgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fY29udGVudC10ZXh0XCIpO1xuICAgIHRoaXMuX2dhbGxlcnlUaXRsZSA9IHRoaXMuX2dhbGxlcnlDb250LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5nYWxsZXJ5X190aXRsZS1pdGVtXCJcbiAgICApO1xuICAgIHRoaXMuX2J0bkxpa2UgPSB0aGlzLl9nYWxsZXJ5Q29udC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2xpa2VcIik7XG4gICAgdGhpcy5saWtlc0NvdW50ZXIgPSB0aGlzLl9nYWxsZXJ5Q29udC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuZ2FsbGVyeV9fbGlrZS1udW1iZXJcIlxuICAgICk7XG5cbiAgICB0aGlzLl9nYWxsZXJ5SW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9nYWxsZXJ5SW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9nYWxsZXJ5VGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMubGlrZXNDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vRXZlbnRvcyBnZW5lcmFsZXMgcGFyYSBkYXIgbGlrZSwgZWxpbWluYXIgeSBhYnJpciBwb3B1cFxuICAgIHRoaXMuX2J0bkxpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2J0bkxpa2UuY2xhc3NMaXN0LnRvZ2dsZShcImdhbGxlcnlfX2xpa2VfYWN0aXZlXCIpO1xuICAgIH0pO1xuXG4gICAgLy9pZiAodGhpcy5vd25lci5faWQgIT09IHRoaXMudXNlcklkKSB7XG4gICAgLy9FdmVudG8gcGFyYSBlbGltaW5hciBjYXJkXG4gICAgdGhpcy5fYnRuRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcImVudHJhbmRvIGEgZWxpbWluYXJcIik7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlKHRoaXMuX2lkLCB0aGlzLl9idG5EZWxldGUpO1xuICAgIH0pO1xuICAgIC8vfVxuXG4gICAgLy9FdmVudG8gcGFyYSBhYnJpciBpbWFnZW4gZW4gdmVudGFuYSBlbWVyZ2VudGVcbiAgICB0aGlzLl9nYWxsZXJ5SW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vR2VuZXJhIGxhIHRhcmpldGFcbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX3NldFByb3BlcnRpZXMoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBWYWxpZGFjacOzbiBkZSBsb3MgY2FtcG9zIGRlbCBmb3JtdWxhcmlvLCBtdWVzdHJhIG8gcXVpdGEgZXJyb3Jlc1xyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSwgZm9ybUVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQWN0aXZlKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGZvcm1FbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckFjdGl2ZSk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBWZXJpZmljYSBzaSBlbCBpbnB1dCBlcyB2w6FsaWRvXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQsIGZvcm1FbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihcclxuICAgICAgICBpbnB1dEVsZW1lbnQsXHJcbiAgICAgICAgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLFxyXG4gICAgICAgIGZvcm1FbGVtZW50XHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGZvcm1FbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gVmVyaWZpY2Egc2kgaGF5IGNhbXBvcyBpbnbDoWxpZG9zXHJcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCB8fCBpbnB1dEVsZW1lbnQudmFsdWUudHJpbSgpLmxlbmd0aCA9PT0gMFxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIENhbWJpYSBlbCBlc3RhZG8gZGVsIGJvdMOzblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIE9idGllbmUgbG9zIGlucHV0cyBwb3IgZm9ybXVsYXJpbyB5IGxlcyBhw7FhZGUgZXZlbnRvc1xyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7XHJcblxyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9hZGRFdmVudElucHV0QW5kVmFsaWRhdGUoXHJcbiAgICAgICAgaW5wdXRFbGVtZW50LFxyXG4gICAgICAgIGlucHV0TGlzdCxcclxuICAgICAgICBidXR0b25FbGVtZW50LFxyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50XHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9hZGRFdmVudElucHV0QW5kVmFsaWRhdGUoXHJcbiAgICBpbnB1dEVsZW1lbnQsXHJcbiAgICBpbnB1dExpc3QsXHJcbiAgICBidXR0b25FbGVtZW50LFxyXG4gICAgZm9ybUVsZW1lbnRcclxuICApIHtcclxuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50LCBmb3JtRWxlbWVudCk7XHJcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9nZXRTdWJtaXQoKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gSXRlcmEgdG9kb3MgbG9zIGZvcm11bGFyaW9zIHkgbGVzIGHDsWFkZSBsb3MgZXZlbnRvc1xyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9nZXRTdWJtaXQoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsIi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGVsZW1lbnRvcyBvYnRlbmlkb3MgZGVsIGRvbSovXG5jb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVcIik7XG5leHBvcnQgY29uc3QgY29udGFpbmVyUHJvZmlsZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2NvbnRhaW5lclwiKTtcbmV4cG9ydCBjb25zdCBkYXRhUHJvZmlsZSA9IGNvbnRhaW5lclByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kYXRhXCIpO1xuXG5jb25zdCBtYWluQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluXCIpO1xuZXhwb3J0IGNvbnN0IGdhbGxlcnlDb250ZW50ID0gbWFpbkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlcIik7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGFicmUgcG9wdXAgcGFyYSBhZ3JlZ2FyIGltYWdlbmVzIG51ZXZhcyovXG5leHBvcnQgY29uc3QgcG9wdXBTaG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1zaG93XCIpO1xuY29uc3QgcG9wdXBQaWNDb250ID0gcG9wdXBTaG93LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtc2hvd19fY29udGFpbmVyXCIpO1xuZXhwb3J0IGNvbnN0IGJ0bkNsb3NlUGljUG9wID0gcG9wdXBQaWNDb250LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtc2hvd19fY2xvc2VcIik7XG5leHBvcnQgY29uc3QgcG9wdXBQaWNJbWFnZSA9IHBvcHVwUGljQ29udC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLXNob3dfX2FkZFwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cFBpY1RpdGxlID0gcG9wdXBQaWNDb250LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwLXNob3dfX3RpdGxlLWNyZWF0ZVwiXG4pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBhYnJlIHBvcHVwIHBhcmEgY29uZmlybWFyIGVsaW1pbmFjaW9uIGRlIGltYWdlbiovXG5leHBvcnQgY29uc3QgYnRuUmVtb3ZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNyZW1vdmUtY2FyZFwiKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gcG9wdXAgZWRpY2lvbiovXG5leHBvcnQgY29uc3QgYnRFZGl0ID0gZGF0YVByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWRhdGFcIik7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGNlcnJhciB2ZW50YW5hIGVtZXJnZW50ZSBkZWwgcG9wdXAgZGUgZWRpY2lvbiBwZXJmaWwgZGVzZGUgYm90b24gXCJYXCIqL1xuZXhwb3J0IGNvbnN0IGJ0Q2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Nsb3NlLXByb2ZpbGVcIik7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGFicmlyIHZlbnRhbmEgZW1lcmdlbnRlIGRlbCBwb3B1cCBkZSBlZGljaW9uIHBlcmZpbCovXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ZhY2UtaW1hZ2VcIik7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHBvcHVwIGNhcmQgbnVldmEqL1xuZXhwb3J0IGNvbnN0IGJ0QWRkID0gY29udGFpbmVyUHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1waWN0dXJlXCIpO1xuZXhwb3J0IGNvbnN0IG5hbWVOZXdDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbnB1dC1uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IGpvYk5ld0NhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2lucHV0LWRlc2NcIik7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGNlcnJhciB2ZW50YW5hIGVtZXJnZW50ZSBkZWwgcG9wdXAgZGUgY2FyZCBudWV2YSBkZXNkZSBib3RvbiBcIlhcIiovXG5leHBvcnQgY29uc3QgYnRDbG9zZUNhcmROZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Nsb3NlLWNhcmRcIik7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIC8vYWJyZSBsYSB2ZW50YW5hIGVtZXJnZW50ZVxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX2dlbmVyYXRlXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgLy9jaWVycmEgbGEgdmVudGFuYSBlbWVyZ2VudGVcclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfZ2VuZXJhdGVcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICAvL0FsIHByZXNpb25hciBsYSB0ZWNsYSBcIkVzY2FwZVwiLCBzZSBjaWVycmEgbGEgdmVudGFuYSBlbWVyZ2VudGVcclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL0FsIHJlYWxpemFyIGNsaWNrIGZ1ZXJhIGRlIGxhIHZlbnRhbmEgZW1lcmdlbnRlLCBzZSBjaWVycmFcclxuICBoYW5kbGVDbGlja091dHNpZGUoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gdGhpcy5fcG9wdXBFbGVtZW50KSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vRGV0ZWN0b3IgZGUgZXZlbnRvc1xyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMuaGFuZGxlQ2xpY2tPdXRzaWRlKGV2dCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICB9XG5cbiAgLy9jaWVycmEgbGEgdmVudGFuYSBlbWVyZ2VudGUgeSBsaW1waWEgbG9zIGNhbXBvcyBkZWwgZm9ybXVsYXJpb1xuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XG4gIH1cbiAgLy9yZWNvcGlsYSBkYXRvcyBkZSB0b2RvcyBsb3MgY2FtcG9zIGRlIGVudHJhZGFcbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5mb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLmZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLmZvcm1WYWx1ZXM7XG4gIH1cblxuICAvL0RldGVjdG9yIGRlIGV2ZW50b3NcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLmdldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIC8vVG9tYSB1biBlbGVtZW50byBkZWwgRE9NIHkgbG8gYWdyZWdhIGFsIGNvbnRlbmVkb3JcbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIC8vTGltcGlhIGVsIGNvbnRlbmVkb3JcbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gIH1cblxuICAvL1JlbmRlcml6YSB0b2RvcyBsb3MgZWxlbWVudG9zIGVuIGxhIHDDoWdpbmFcbiAgcmVuZGVyZXIoKSB7XG4gICAgdGhpcy5jbGVhcigpO1xuXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yLCBpZCB9KSB7XG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9qb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VySWQgPSBpZDtcbiAgfVxuXG4gIC8vIERldnVlbHZlIHVuIG9iamV0byBjb24gbG9zIGRhdG9zIGRlbCB1c3VhcmlvXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgam9iOiB0aGlzLl9qb2IudGV4dENvbnRlbnQsXG4gICAgICBhdmF0YXI6IHRoaXMuX2F2YXRhci5zcmMsXG4gICAgICBfaWQ6IHRoaXMuX3VzZXJJZCxcbiAgICB9O1xuICB9XG5cbiAgLy8gRXN0YWJsZWNlIGxvcyBkYXRvcyBkZWwgdXN1YXJpb1xuICBzZXRVc2VySW5mbyhkYXRhKSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBkYXRhLmF2YXRhcjtcbiAgICB0aGlzLl91c2VySWQgPSBkYXRhLl9pZDtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtc2hvd19fY29udGFpbmVyXCIpO1xyXG4gIH1cclxuXHJcbiAgX3NldFByb3BlcnRpZXMoKSB7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1zaG93X19hZGRcIik7XHJcbiAgICB0aGlzLl90aXRsZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1zaG93X190aXRsZS1jcmVhdGVcIik7XHJcblxyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3NldFByb3BlcnRpZXMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgICB0aGlzLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cblxuICBoYW5kbGVQcm9taXNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICAvLyBzaSBlbCBzZXJ2aWRvciBkZXZ1ZWx2ZSB1biBlcnJvciwgcmVjaGF6YSBlbCBwcm9taXNlXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgLyogb2J0aWVuZSBsYXMgY2FydGFzIGRlIGxhIEFQSSAqL1xuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlUHJvbWlzZShyZXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vIHJlZ2lzdHJhIGVsIGVycm9yIGVuIGxhIGNvbnNvbGFcbiAgICAgIH0pO1xuICB9XG5cbiAgLyogT2J0aWVuZSBsYSBpbmZvcm1hY2nDs24gZGVsIHBlcmZpbCBkZSBsYSBBUEkgKi9cbiAgZ2V0UHJvZmlsZUluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlUHJvbWlzZShyZXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vIHJlZ2lzdHJhIGVsIGVycm9yIGVuIGxhIGNvbnNvbGFcbiAgICAgIH0pO1xuICB9XG5cbiAgLyogTW9kaWZpY2EgbGEgaW5mb3JtYWNpw7NuIGRlbCBwZXJmaWwgZGUgbGEgQVBJICovXG4gIGVkaXRQcm9maWxlKHByb2ZpbGUpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBwcm9maWxlLm5hbWUsXG4gICAgICAgIGFib3V0OiBwcm9maWxlLmFib3V0LFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlUHJvbWlzZShyZXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vIHJlZ2lzdHJhIGVsIGVycm9yIGVuIGxhIGNvbnNvbGFcbiAgICAgIH0pO1xuICB9XG5cbiAgYWRkQ2FyZHMoY2FyZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogY2FyZC5uYW1lLFxuICAgICAgICBsaW5rOiBjYXJkLmxpbmssXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVQcm9taXNlKHJlcyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8gcmVnaXN0cmEgZWwgZXJyb3IgZW4gbGEgY29uc29sYVxuICAgICAgfSk7XG4gIH1cblxuICByZW1vdmVDYXJkcyhjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGNhcmQubmFtZSxcbiAgICAgICAgbGluazogY2FyZC5saW5rLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlUHJvbWlzZShyZXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vIHJlZ2lzdHJhIGVsIGVycm9yIGVuIGxhIGNvbnNvbGFcbiAgICAgIH0pO1xuICB9XG5cbiAgYWRkTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlUHJvbWlzZShyZXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vIHJlZ2lzdHJhIGVsIGVycm9yIGVuIGxhIGNvbnNvbGFcbiAgICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGNhcmQubmFtZSxcbiAgICAgICAgbGluazogY2FyZC5saW5rLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlUHJvbWlzZShyZXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vIHJlZ2lzdHJhIGVsIGVycm9yIGVuIGxhIGNvbnNvbGFcbiAgICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIC8vRGV0ZWN0b3IgZGUgZXZlbnRvc1xuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQge1xuICBidEVkaXQsXG4gIGJ0QWRkLFxuICBnYWxsZXJ5Q29udGVudCxcbiAgYnRDbG9zZSxcbiAgYnRDbG9zZUNhcmROZXcsXG4gIHByb2ZpbGVOYW1lLFxuICBwcm9maWxlRGVzYyxcbiAgbmFtZU5ld0NhcmQsXG4gIGpvYk5ld0NhcmQsXG4gIGJ0bkNsb3NlUGljUG9wLFxuICBidG5SZW1vdmUsXG59IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBpbWFnZUxvZ28gZnJvbSBcIi4uL2ltYWdlcy9sb2dvX2hlYWRlci5wbmdcIjtcbmltcG9ydCBpbWFnZVBlbmNpbCBmcm9tIFwiLi4vaW1hZ2VzL2VkaXRfcHJvZmlsZS5wbmdcIjtcbmltcG9ydCBpbWFnZUFkZCBmcm9tIFwiLi4vaW1hZ2VzL2FkZF9pY29uLnBuZ1wiO1xuaW1wb3J0IGNsb3NlUG9wdXAgZnJvbSBcIi4uL2ltYWdlcy9jbG9zZV9pY29uLnBuZ1wiO1xuaW1wb3J0IGltYWdlVHJhc2ggZnJvbSBcIi4uL2ltYWdlcy90cmFzaC5wbmdcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUlNQUdFTkVTIElNUE9SVEFEQVMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLWxvZ29cIikuc3JjID0gaW1hZ2VMb2dvO1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1wZW5jaWxcIikuc3JjID0gaW1hZ2VQZW5jaWw7XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLWFkZFwiKS5zcmMgPSBpbWFnZUFkZDtcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2xvc2UtcHJvZmlsZVwiKS5zcmMgPSBjbG9zZVBvcHVwO1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjbG9zZS1jYXJkXCIpLnNyYyA9IGNsb3NlUG9wdXA7XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Nsb3NlLXNob3dcIikuc3JjID0gY2xvc2VQb3B1cDtcblxuLy9hY3R1YWxpemEgZWwgc3JjIGRlIGxhcyBpbWFnZW5lcyB0YW50byBhIGxhIGNhcmdhIGluaWNpYWwgY29tbyBkZXNwdWVzIGRlIGNyZWFyIHVuYSBudWV2YSBjYXJ0YVxuZnVuY3Rpb24gdXBkYXRlVHJhc2hCaW5JbWFnZXMoKSB7XG4gIGNvbnN0IHRyYXNoSW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5nYWxsZXJ5X19pbWFnZS10cmFzaFwiKTtcbiAgdHJhc2hJbWFnZXMuZm9yRWFjaCgoaW1hZ2UpID0+IHtcbiAgICBpbWFnZS5zcmMgPSBpbWFnZVRyYXNoOyAvL2FjdHVhbGl6YSBlbCBzcmMgZGUgbGEgaW1hZ2VuXG4gIH0pO1xufVxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tQVBJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWJfZXNfMTFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiZjJkNWI3NGMtYzYyNi00MDM4LWIyNzUtYjIwMGQzNjU4MmI1XCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tUEVSRklMLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG4gIGF2YXRhclNlbGVjdG9yOiBcIi5wcm9maWxlX19mYWNlLWltYWdlXCIsXG4gIGlkOiBcIlwiLFxufSk7XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUFQSSBDQVJHQSBQRVJGSUwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5hcGkuZ2V0UHJvZmlsZUluZm8oKS50aGVuKChyZXN1bHQpID0+IHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzdWx0KTtcbn0pO1xuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS1GVU5DSU9ORVMgREUgVEFSSkVUQVMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2sobmFtZSwgbGluaykge1xuICBjb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHsgbmFtZSwgbGluayB9LCBcIiNwb3B1cC1zaG93X2lkXCIpO1xuICAvL2FicmUgaW1hZ2VuIHkgdGl0dWxvIGVuIHZlbnRhbmEgZW1lcmdlbnRlXG4gIHBvcHVwSW1hZ2Uub3BlbigpO1xuXG4gIC8vZXZlbnRvIHBhcmEgY2VycmFyIHZlbnRhbmEgZW1lcmdlbnRlXG4gIGJ0bkNsb3NlUGljUG9wLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcG9wdXBJbWFnZS5jbG9zZSgpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2FyZERlbGV0ZShpZCwgYnRuVHJhc2gpIHtcbiAgY29uc3QgcG9wdXBEZWxldGUgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFwiI3BvcHVwLWRlbGV0ZVwiLCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJpZDogXCIsIGlkKTtcbiAgICAvKmFwaS5yZW1vdmVDYXJkcyhpZCkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgIH0pOyovXG4gIH0pO1xuXG4gIC8vZ2VuZXJhZG9yIGRlIGV2ZW50b3NcbiAgcG9wdXBEZWxldGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAvL2V2ZW50byBwYXJhIGFicmlyIHZlbnRhbmEgZW1lcmdlbnRlXG4gIGJ0blRyYXNoLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcG9wdXBEZWxldGUub3BlbigpO1xuICB9KTtcblxuICAvL2V2ZW50byBwYXJhIGNlcnJhciB2ZW50YW5hIGVtZXJnZW50ZVxuICBidG5SZW1vdmUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBwb3B1cERlbGV0ZS5jbG9zZSgpO1xuICB9KTtcbn1cblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tR0VORVJBRE9SIERFIFRBUkpFVEFTLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZnVuY3Rpb24gZ2VuZXJhdGVDYXJkKGl0ZW0pIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGl0ZW0sXG4gICAgdXNlckluZm8uX3VzZXJJZCxcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgaGFuZGxlQ2FyZERlbGV0ZVxuICApO1xuICByZXR1cm4gY2FyZDtcbn1cblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tQVBJIENBUkdBIFRPREFTIExBUyBUQVJKRVRBUy0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChyZXN1bHQpID0+IHtcbiAgY29uc3QgZGVmYXVsdENhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXG4gICAge1xuICAgICAgaXRlbXM6IHJlc3VsdCxcbiAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBjYXJkID0gZ2VuZXJhdGVDYXJkKGl0ZW0pO1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gICAgICAgIGRlZmF1bHRDYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICBcIi5nYWxsZXJ5XCJcbiAgKTtcblxuICBkZWZhdWx0Q2FyZExpc3QucmVuZGVyZXIoKTtcbiAgdXBkYXRlVHJhc2hCaW5JbWFnZXMoKTtcbn0pO1xuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS1QT1BVUCBQRVJGSUwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vL2NyZWFjaW9uIGRlIGxhIGNsYXNlIFBvcHVwV2l0aEZvcm1cbmNvbnN0IHBvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3BvcHVwLXByb2ZpbGVcIiwgKGlucHV0cykgPT4ge1xuICBhcGkuZWRpdFByb2ZpbGUoaW5wdXRzKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHJlc3VsdC5uYW1lO1xuICAgIHByb2ZpbGVEZXNjLnRleHRDb250ZW50ID0gcmVzdWx0LmFib3V0O1xuICB9KTtcbiAgLy9cbn0pO1xuXG4vL2dlbmVyYWRvciBkZSBldmVudG9zXG5wb3B1cFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy9ldmVudG8gcGFyYSBhYnJpciB2ZW50YW5hIGVtZXJnZW50ZVxuYnRFZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwUHJvZmlsZS5vcGVuKCk7XG4gIGNvbnN0IHVzID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgbmFtZU5ld0NhcmQudmFsdWUgPSB1cy5uYW1lO1xuICBqb2JOZXdDYXJkLnZhbHVlID0gdXMuam9iO1xufSk7XG5cbi8vZXZlbnRvIHBhcmEgY2VycmFyIHZlbnRhbmEgZW1lcmdlbnRlXG5idENsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwUHJvZmlsZS5jbG9zZSgpO1xufSk7XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVBPUFVQIE5VRVZBIENBUlRBLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY29uc3QgcG9wdXBDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcG9wdXAtcGljdHVyZVwiLCAoaW5wdXRzKSA9PiB7XG4gIGFwaS5hZGRDYXJkcyh7IG5hbWU6IGlucHV0cy50aXRsZSwgbGluazogaW5wdXRzLmxpbmsgfSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgY29uc3QgbmV3Y2FyZCA9IGdlbmVyYXRlQ2FyZChyZXN1bHQpO1xuICAgIGdhbGxlcnlDb250ZW50LnByZXBlbmQobmV3Y2FyZC5nZW5lcmF0ZUNhcmQoKSk7XG4gICAgdXBkYXRlVHJhc2hCaW5JbWFnZXMoKTtcbiAgfSk7XG59KTtcblxuLy9nZW5lcmFkb3IgZGUgZXZlbnRvc1xucG9wdXBDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vZXZlbnRvIHBhcmEgYWJyaXIgdmVudGFuYSBlbWVyZ2VudGVcbmJ0QWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwQ2FyZC5vcGVuKCk7XG59KTtcblxuLy9ldmVudG8gcGFyYSBjZXJyYXIgdmVudGFuYSBlbWVyZ2VudGVcbmJ0Q2xvc2VDYXJkTmV3LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwQ2FyZC5jbG9zZSgpO1xufSk7XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVZBTElEQUNJT05FUy0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy9WYWxpZGFjacOzbiBkZSBsb3MgY2FtcG9zIGRlbCBmb3JtdWxhcmlvXG5jb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fZm9ybVwiKSk7XG5cbmZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gIC8vaXRlcmFjaW9uIGRlIGZvcm11bGFyaW9zXG4gIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICAgIHtcbiAgICAgIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcbiAgICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICAgICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcbiAgICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9pbmFjdGl2ZVwiLFxuICAgICAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gICAgICBpbnB1dEVycm9yQWN0aXZlOiBcInBvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcbiAgICAgIGVycm9yQ2xhc3M6IFwiLnBvcHVwX19lcnJvclwiLFxuICAgIH0sXG4gICAgZm9ybUVsZW1lbnRcbiAgKTtcbiAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbn0pO1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJwIiwiQ2FyZCIsImRhdGEiLCJ1c2VySWQiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVDYXJkRGVsZXRlIiwiaGFuZGxlQ2FyZExpa2UiLCJoYW5kbGVDYXJkRGlzTGlrZSIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfaWQiLCJfbGlrZXMiLCJsaWtlcyIsIl9jYXJkSWQiLCJvd25lciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlQ2FyZERlbGV0ZSIsIl9oYW5kbGVDYXJkTGlrZSIsIl9oYW5kbGVDYXJkRGlzbGlrZSIsIl9jYXJkIiwiX2dldFRlbXBsYXRlIiwia2V5IiwidmFsdWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2J0bkRlbGV0ZSIsInJlbW92ZSIsIl9nYWxsZXJ5SW1hZ2UiLCJfZ2FsbGVyeUNvbnQiLCJfZ2FsbGVyeVRpdGxlIiwiX2J0bkxpa2UiLCJsaWtlc0NvdW50ZXIiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsIl90aGlzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNvbnNvbGUiLCJsb2ciLCJfc2V0UHJvcGVydGllcyIsIl9zZXRFdmVudExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX3NldHRpbmdzIiwiX2Zvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJhZGQiLCJpbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQWN0aXZlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRMaXN0Iiwic29tZSIsInRyaW0iLCJidXR0b25FbGVtZW50IiwiX2hhc0ludmFsaWRJbnB1dCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIl9hZGRFdmVudElucHV0QW5kVmFsaWRhdGUiLCJfdGhpczIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfZ2V0U3VibWl0IiwiY29udGFpbmVyUHJvZmlsZSIsImRhdGFQcm9maWxlIiwiZ2FsbGVyeUNvbnRlbnQiLCJwb3B1cFBpY0NvbnQiLCJidG5DbG9zZVBpY1BvcCIsImJ0blJlbW92ZSIsImJ0RWRpdCIsImJ0Q2xvc2UiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjIiwiYnRBZGQiLCJuYW1lTmV3Q2FyZCIsImpvYk5ld0NhcmQiLCJidENsb3NlQ2FyZE5ldyIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsb3NlIiwidGFyZ2V0IiwiaGFuZGxlQ2xpY2tPdXRzaWRlIiwiUG9wdXBXaXRoRm9ybSIsIl9Qb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJfY2FsbFN1cGVyIiwiX2lucHV0TGlzdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2luaGVyaXRzIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImNhbGwiLCJyZXNldCIsImZvcm1WYWx1ZXMiLCJpbnB1dCIsIl90aGlzMyIsImdldElucHV0VmFsdWVzIiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwiYXBwZW5kIiwiaW5uZXJIVE1MIiwiY2xlYXIiLCJpdGVtIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX2pvYiIsIl9hdmF0YXIiLCJfdXNlcklkIiwiam9iIiwiYXZhdGFyIiwiYWJvdXQiLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZSIsIl90aXRsZSIsIkFwaSIsIm9wdGlvbnMiLCJiYXNlVXJsIiwiaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJoYW5kbGVQcm9taXNlIiwiY2F0Y2giLCJlcnIiLCJwcm9maWxlIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkIiwiX3RoaXM0IiwiY2FyZElkIiwiX3RoaXM1IiwiX3RoaXM2IiwiX3RoaXM3IiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwidXBkYXRlVHJhc2hCaW5JbWFnZXMiLCJpbWFnZSIsImltYWdlVHJhc2giLCJpbWFnZUxvZ28iLCJpbWFnZVBlbmNpbCIsImltYWdlQWRkIiwiY2xvc2VQb3B1cCIsImFwaSIsImF1dGhvcml6YXRpb24iLCJ1c2VySW5mbyIsInBvcHVwSW1hZ2UiLCJvcGVuIiwiYnRuVHJhc2giLCJwb3B1cERlbGV0ZSIsInNldEV2ZW50TGlzdGVuZXJzIiwiZ2VuZXJhdGVDYXJkIiwiZ2V0UHJvZmlsZUluZm8iLCJyZXN1bHQiLCJzZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsImRlZmF1bHRDYXJkTGlzdCIsImNhcmRFbGVtZW50IiwiYWRkSXRlbSIsInBvcHVwUHJvZmlsZSIsImlucHV0cyIsImVkaXRQcm9maWxlIiwidXMiLCJnZXRVc2VySW5mbyIsInBvcHVwQ2FyZCIsImFkZENhcmRzIiwidGl0bGUiLCJuZXdjYXJkIiwicHJlcGVuZCIsImZvcm1TZWxlY3RvciIsImVycm9yQ2xhc3MiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==